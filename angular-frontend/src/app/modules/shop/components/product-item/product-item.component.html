<kep-card>
  <div class="card-img">
    @if (hasImages()) {
      <div class="product-carousel">
        <div class="product-carousel__viewport">
          <button
            type="button"
            class="product-carousel__control product-carousel__control--prev"
            (click)="showPreviousImage()"
            [disabled]="!hasMultipleImages()"
            aria-label="Previous image"
          >
            <span aria-hidden="true">&#10094;</span>
          </button>
          <img
            class="product-carousel__image"
            [src]="currentImageUrl"
            [alt]="product.title"
          />
          <button
            type="button"
            class="product-carousel__control product-carousel__control--next"
            (click)="showNextImage()"
            [disabled]="!hasMultipleImages()"
            aria-label="Next image"
          >
            <span aria-hidden="true">&#10095;</span>
          </button>
          @if (visibleThumbnails.length) {
            <div
              class="product-carousel__thumbnails"
              [class.product-carousel__thumbnails--stacked]="(product?.images?.length ?? 0) > 3"
            >
              @for (thumbnail of visibleThumbnails; track thumbnail.index) {
                <button
                  type="button"
                  class="product-carousel__thumbnail"
                  [class.product-carousel__thumbnail--active]="thumbnail.index === currentImageIndex"
                  (click)="selectImage(thumbnail.index)"
                  [attr.aria-label]="thumbnail.image.name || product.title"
                >
                  <img
                    [src]="thumbnail.image.url"
                    [alt]="thumbnail.image.name || product.title"
                  />
                </button>
              }
            </div>
          }
        </div>
      </div>
    } @else {
      <div class="product-carousel__placeholder">
        <span>No image available</span>
      </div>
    }
  </div>

  <div class="card-header">
    <div class="card-title text-dark">
      {{ product.title }}
    </div>
  </div>

  <div class="card-footer">
    <div class="text-dark font-medium-1 mb-1">{{ 'Color' | translate }}:</div>
    @for (color of product.colors; track color.name) {
      <span class="badge badge-color" [style.background]="color.color" [ngbTooltip]="color.name">
      </span>
    }

    <div class="text-dark font-medium-1 mt-2 mb-1">{{ 'Size' | translate }}:</div>
    <div class="d-flex" style="gap: 0.5rem;">
      @for (size of product.colors[0].sizes; track size.name) {
        <button class="btn btn-sm btn-primary">
          {{ size.name }}
        </button>
      }
    </div>
  </div>

  <div class="card-footer">
    <kepcoin [value]="product.kepcoin"/>
  </div>
</kep-card>
