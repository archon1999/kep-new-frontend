<kep-card class="duels-list-card h-100">
  <div class="card-body d-flex flex-column gap-3">
    <div class="d-flex flex-wrap justify-content-between align-items-start gap-3">
      <div class="duels-list-card__info">
        <div class="duels-list-card__pair d-flex align-items-center gap-2 flex-wrap">
          <user-popover [username]="duel.playerFirst?.username"></user-popover>
          <span class="text-muted">vs</span>
          @if (duel.playerSecond) {
            <user-popover [username]="duel.playerSecond.username"></user-popover>
          } @else {
            <span class="badge bg-secondary">BYE</span>
          }
        </div>
        <div class="duels-list-card__meta text-muted small d-flex flex-wrap align-items-center gap-2 mt-1">
          <span><i class="bx bx-play-circle align-middle"></i> {{ duel.startTime | date:'medium' }}</span>
          @if (duel.finishTime) {
            <span class="duels-list-card__dot">â€¢</span>
            <span><i class="bx bx-flag align-middle"></i> {{ duel.finishTime | date:'medium' }}</span>
          }
        </div>
        <div class="duels-list-card__badges d-flex flex-wrap gap-2 mt-2">
          <span [class]="statusClass">{{ statusKey | translate }}</span>
          @if (duel.isConfirmed === false) {
            <span class="badge rounded-pill bg-warning text-dark">{{ 'AwaitingConfirmation' | translate }}</span>
          }
        </div>
      </div>
      <div class="duels-list-card__scores text-end d-flex flex-column align-items-end gap-2">
        <div class="duels-list-card__score">
          <span class="duels-list-card__score-value text-primary">{{ duel.playerFirst?.balls ?? 0 }}</span>
        </div>
        <div class="duels-list-card__score" *ngIf="duel.playerSecond">
          <span class="duels-list-card__score-value text-primary">{{ duel.playerSecond?.balls ?? 0 }}</span>
        </div>
      </div>
    </div>

    <div class="duels-list-card__actions d-flex flex-wrap justify-content-end gap-2">
      @if (duel.duelPreset) {
        <button
          type="button"
          class="btn btn-sm btn-outline-secondary"
          (click)="openPresetModal()"
        >
          {{ 'Preset' | translate }}
        </button>
      }
      @if (confirmAvailable) {
        <button
          type="button"
          class="btn btn-sm btn-success"
          (click)="onConfirm()"
          [disabled]="confirmDisabled"
        >
          {{ 'Confirm' | translate }}
          @if (confirmLoading) {
            <span class="spinner-border spinner-border-sm ms-1" role="status"></span>
          }
        </button>
      }
      <a
        class="btn btn-sm btn-outline-primary"
        [routerLink]="viewLink"
      >
        {{ 'View' | translate }}
      </a>
    </div>
  </div>
</kep-card>
